{% snippet 'selfinfo/snippets/selfinfo_content_header.html', icon_class='fas fa-user-plus me-2', label=_('User - Add') %}
<div class="p-3">
    <form id="user-add-form" class="form-control border-0 shadow-none p-0" hx-post="{{ h.url_for('selftools_htmx.selftools_user_add') }}" hx-trigger="submit" hx-target="#user-add-resp" hx-swap="innerHTML">
        
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="username" class="form-label">{{ _('Username') }} <span class="text-danger">*</span></label>
                <input type="text" name="username" id="username" class="form-control" required>
                <div class="form-text">{{ _('Username for login (lowercase, no spaces)') }}</div>
            </div>

            <div class="col-md-6 mb-3">
                <label for="fullname" class="form-label">{{ _('Full Name') }}</label>
                <input type="text" name="fullname" id="fullname" class="form-control">
                <div class="form-text">{{ _('Display name for the user') }}</div>
            </div>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">{{ _('Email') }} <span class="text-danger">*</span></label>
            <input type="email" name="email" id="email" class="form-control" required>
            <div class="form-text">{{ _('Valid email address') }}</div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="password" class="form-label">{{ _('Password') }} <span class="text-danger">*</span></label>
                <input type="password" name="password" id="password" class="form-control" required minlength="8">
                <div class="form-text">{{ _('Minimum 8 characters') }}</div>
            </div>

            <div class="col-md-6 mb-3">
                <label for="password_confirm" class="form-label">{{ _('Confirm Password') }} <span class="text-danger">*</span></label>
                <input type="password" name="password_confirm" id="password_confirm" class="form-control" required minlength="8">
                <div class="form-text">{{ _('Re-enter password') }}</div>
            </div>
        </div>

        <div class="mb-3">
            <label for="extra_fields" class="form-label">{{ _('Extra Fields (JSON)') }}</label>
            <textarea name="extra_fields" id="extra_fields" class="form-control font-monospace" rows="6" placeholder='{"sysadmin": false, "custom_field": "value"}'></textarea>
            <div class="form-text">
                <i class="fa fa-info-circle"></i>
                {{ _('Optional: Add custom fields as JSON object. Example:') }}
                <code>{"sysadmin": false}</code>
            </div>
        </div>

        <button type="button" class="btn selfinfo-button-main-color-bg text-white mt-2" data-bs-toggle="modal" data-bs-target="#user-add-confirmation">
            <i class="fas fa-user-plus me-2"></i>
            {{ _('Create User') }}
        </button>

        {% snippet "selftools/snippets/confirmation.html", modal_id='user-add-confirmation', modal_label_id='user-add-label-id' %}
    </form>

    <div id="user-add-resp" class="bg-light p-3 border rounded mt-3">
        <p class="text-muted">{{ _('Fill the form and click "Create User" button...') }}</p>
    </div>
</div>
